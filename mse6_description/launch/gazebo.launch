<?xml version="1.0" encoding="utf-8"?>

<launch>

  <arg name="robot" default="mse6"/>
    
  <include
    file="$(find gazebo_ros)/launch/empty_world.launch" />
    
  <rosparam file="$(find mse6_config)/config/control/gazebo_control.yaml" command="load"/>
  
  <param
    name="robot_description" command="$(find xacro)/xacro --inorder '$(find mse6_description)/urdf/mse6.xacro'"/>
  
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />    
  
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
        <param name="use_gui" value="False"/>
    </node>    
    
  <!--<node
    name="spawn_model"
    pkg="gazebo_ros"
    type="spawn_model"
    args="-file $(find mse6_description)/urdf/mse6_description.urdf -urdf -model mse6_description"
    output="screen" />-->

  <node name="controller_spawner" pkg="controller_manager" type="spawner" 
        respawn="false" output="screen" 
        args="joint_state_controller mobile_base_controller"/>
  
  <node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model" 
    args="-param robot_description -urdf -z 0.1 -x 0 -y 0 -Y 0 -model $(arg robot)" /> 
  
  <node
    name="rviz"
    pkg="rviz"
    type="rviz"
    args="-d $(find mse6_description)/config/display.rviz" />
    
</launch>
